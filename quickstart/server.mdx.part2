### 测试命令

让我们确保 Claude for Desktop 能识别我们在 `weather` 服务器中公开的两个工具。您可以通过查找锤子 <img src="/images/claude-desktop-mcp-hammer-icon.svg" style={{display: 'inline', margin: 0, height: '1.3em'}} /> 图标来实现：

<Frame>
  <img src="/images/visual-indicator-mcp-tools.png" />
</Frame>

点击锤子图标后，您应该能看到列出的两个工具：

<Frame>
  <img src="/images/available-mcp-tools.png" />
</Frame>

如果您的服务器未被 Claude for Desktop 识别，请继续查看[故障排除](#故障排除)部分获取帮助。

## 在对话中使用工具

现在，让我们向 Claude 询问天气信息，看看它是否能使用我们的工具：

1. 打开 Claude for Desktop，确保您可以在右上角看到 MCP 图标 <img src="/images/claude-desktop-mcp-plug-icon.svg" style={{display: 'inline', margin: 0, height: '1.3em'}} />

2. 向 Claude 询问：
   ```
   科罗拉多州现在有任何天气警报吗？
   ```
   
   Claude 可能会回答它没有这方面的实时能力，但会提到它可以使用工具。如果是这样，请告诉它：
   ```
   请使用工具获取科罗拉多州的天气警报。
   ```

3. 这时您会看到 Claude 请求使用工具的提示：
   
   <Frame>
     <img src="/images/quickstart-approve.png" />
   </Frame>

4. 点击"允许"，然后 Claude 将运行 `get-alerts` 工具并返回结果！

5. 现在尝试另一个工具。询问：
   ```
   旧金山的天气预报如何？
   ```
   
   同样，Claude 可能需要提示来使用工具：
   ```
   请使用工具获取旧金山（坐标 37.7749, -122.4194）的天气预报。
   ```
   
6. 当 Claude 请求权限时点击"允许"，它将运行 `get-forecast` 工具并返回结果。

恭喜！您已成功构建了一个 MCP 服务器，并让 Claude 使用它来获取天气信息！

<Frame>
  <img src="/images/quickstart-screenshot.png" />
</Frame>

## 故障排除

### 服务器未被检测到

如果您在 Claude for Desktop 中看不到 MCP 图标或您的工具，请尝试：

1. **检查您的 `claude_desktop_config.json`**
   - 确认文件路径正确
   - 检查拼写错误
   - 确保它是有效的 JSON（没有多余的逗号等）

2. **检查服务器路径**
   - 确保您使用的是**绝对路径**（以 `/` 或 `C:\` 开头）
   - 对于 Python，请确认 `.py` 文件确实存在于指定位置
   - 对于 Node，请确认 `build/index.js` 存在

3. **启用开发者工具**
   在 macOS 上：
   - 创建配置：`echo '{"allowDevTools": true}' > ~/Library/Application\ Support/Claude/developer_settings.json`
   - 关闭并重新打开 Claude
   - 使用 Cmd+Option+Shift+I 打开开发者工具
   - 检查控制台是否有错误

4. **查看日志**
   - 查看 MCP 日志：`tail -f ~/Library/Logs/Claude/mcp*`
   - 这些日志可能会显示配置或路径问题

### 验证服务器工作正常

通过直接运行它来验证您的服务器是否正常工作：

<Tabs>
<Tab title="Python">
```bash
uv run weather.py
```
</Tab>
<Tab title="Node">
```bash
node build/index.js
```
</Tab>
<Tab title="Java">
```bash
java -jar target/mcp-weather-stdio-server-0.0.1-SNAPSHOT.jar
```
</Tab>
</Tabs>

如果它启动时没有错误，那么问题可能是 Claude 与它的连接。

## 下一步

<CardGroup cols={2}>
  <Card
    title="构建一个客户端"
    icon="bolt"
    href="/quickstart/client"
  >
    学习如何构建您自己的 MCP 客户端
  </Card>
  <Card
    title="使用 MCP 示例服务器"
    icon="grid"
    href="/examples"
  >
    探索一系列预构建的 MCP 服务器
  </Card>
  <Card
    title="了解 MCP 资源"
    icon="database"
    href="/docs/concepts/resources"
  >
    深入了解 MCP 资源
  </Card>
  <Card
    title="了解 MCP 工具"
    icon="wrench"
    href="/docs/concepts/tools"
  >
    深入了解 MCP 工具
  </Card>
</CardGroup>
